## 크로스 사이트 스크립팅
```
크로스 사이트 스크립팅은 많은 공격의 기점이 되는 공격 방법이다.

웹 서비스 쪽 프로그램에서 입력된 값을 전혀 확인하지 않고 HTML에 그대로 넣어 출력할 경우,
악의적인 스크립트가 삽입된 채 게시되면 그 콘텐츠를 보는 사람의 브라우저에서 그대로 실행된다.
이를 '크로스 사이트 스크립팅', XSS라고 한다.
```

### 유출 방지 쿠키의 설정
```
XSS의 방어선으로 쿠키에 httpOnly 속성을 부여하는 방법이 있다.
이 속성을 부여하면 자바스크립트에서 액세스할 수 없는 쿠키가 된다.
```

### X-XSS-Protection 헤더
```
X-XSS-Protection 헤더를 사용하면 HTML의 인라인에서 스크립트 태그를 사용하는 경우 등
명확하게 수상한 패턴을 감지한다.

X- 가 붙은 비공식 헤더지만 크롬, 사파리 등의 브라우저가 지원한다.
```

<br>
<hr>

## 중간자 공격
```
중간자 공격 (main-in-the-middle attack) MITM 은 프록시 서버가 통신을 중계할 때
통신 내용을 빼내 정보가 누설되는 문제이다.

요즘 무료 와이파이를 통한 인터넷 이용이 증가하는데, 무료 와이파이 중 악의적으로 설치된
액세스 포인트가 있다면, 인터넷 접속 경로로 패킷을 도청당해 통신 내용이 새어나갈 수 있다.

이런 중간자 공격을 방지하려면 HTTPS (TLS)를 이용하는 수밖에 없다.
```

### HSTS
```
중간자 공격에 대항하는 HTTP의 기능 중 하나가 HTTP Strict Transport Security (HSTS)이다.

HSTS는 서버 측에서 '앞으로 접속할 때 HTTPS로 접속해달라' 고 전달하는 기능이다.
```

<br>
<hr>

## 세션 하이재킹
```
세션 하이재킹은 웹 서비스의 세션 토큰을 훔쳐 웹사이트에 로그인하는 공격이다.

일반 웹 서비스의 경우, 처음에 사용자 이름과 암호를 입력받은 후 로그인했음을 나타내는 언뜻 무작위로
보이는 세션 토큰을 쿠키로 브라우저에 보낸다. 
브라우저가 이 쿠키를 저장하면 두번째 이후 액세스부터는 사용자 이름과 암호가 필요 없어진다.
이 세션 토큰을 도난당하면 로그인된 상태로 웹사이트에 액세스할 수 있으므로 사용자 이름과 암호가 유출된 것과
같은 상태가 된다.

다음과 같은 방법으로 이러한 공격으로부터 자신을 보호하는 것이 세션 하이재킹을 피하는 수단이다.
- HTTPS화
- Set-Cookie: httpOnly, secure
```

<br>
<hr>

## 사이트 간 요청 위조 (CSRF)
```
본인이 의도하지 않은 서버 요청을 관계없는 페이지나 사이트에서 보내게 할 수 있다.
실제로 요청을 보내는 것은 공격자가 아니라 피해 사용자이며, 웹 브라우저가 유도된 페이지에
대해서도 쿠키를 발행하므로 로그인 상태는 유지된다.
이로써 피해 사용자의 권한으로 임의의 조작을 실행할 수 있게 된다
```

### CSRF 대책 토큰
```
CSRF를 방지하는 방법으로 HTTP 스테이르리스성을 제한하는 방법이 자주 사용된다.

폼을 설정할 때 숨겨진 필드 (type이 hidden)에 무작위로 생성한 토큰을 집어넣고
POST 요청을 받은 서버 쪽에서 올바른 토큰이 포함되지 않은 모든 요청을 거절하는 방법 등이 있다.
```

### SameSite 속성
```
크롬에서는 쿠키에 SameSite 속성을 부여할 수 있다.
이 속성을 부여하면 요청을 보내기 전의 페이지가 같은 사이트에 없는 한 쿠키를 보내지 않는다.
이렇게 하면 무관한 사이트에서 요청할 수 없으므로 CSRF를 방지할 수 있다.
```

<br>
<hr>

## 클릭재킹
```
클릭재킹의 사례는 두 가지 모두 IFRAME을 이용한다.

하나는 트위터 등 자주 사용되는 웹사이트를 투명하게 하여 악의적인 페이지 위에 겹치는 방법이다.
예를 들어 '클릭으로 추가 정보 표시'와 같은 클릭 유도 버튼을 자주 사용하는 웹 사이트에서
로그아웃, 소셜 네트워크 공유 등의 버튼에 맞춰 배치함으로써 사용자가 인지하지 못한 채 유도된 작업을 하게 된다.

다른 하나는 반대로 자주 사용되는 웹사이트를 아래에 표시하고 그 위에 투명한 레이어로 악의적인 페이지를
표시함으로써 사용자에게 정규 페이지라고 사칭해 악의적인 페이지를 조작하게 하는 것도 있다.
```











