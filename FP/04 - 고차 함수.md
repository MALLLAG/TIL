# 고차 함수란 ?

- 함수를 매개변수로 받는 함수
- 함수를 반환하는 함수

위 두 가지 조건 중 하나 이상을 만족하면 **고차 함수(higher order function)** 라고 한다.

명령형 언어에서는 문제를 해결하기 위해 상태를 변경하거나 반복문을 사용하지만, <br>
함수형 언어에서는 문제를 해결할 때 반드시 고차 함수를 사용해야 한다.

<br>

다음은 상속을 사용해 만든 계산기 예제이다. <br>
중요한 비즈니스 로직인 **x + y, x - y, x * y**가 override fun같은 의미없는 코드들에 의해 잘 보이지 않는다. <br>
따라서 유지보수가 어려워지고 요구사항이 추가될때마다 의미없는 코드도 점점 늘어나게 된다.

```kt
interface Calcable {
    fun calc(x: Int, y: Int): Int
}

class Sum : Calcable {
    override fun calc(x: Int, y: Int): Int {
        return x + y
    }
}

class Minus : Calcable {
    override fun calc(x: Int, y: Int): Int {
        return x - y
    }
}

class Product : Calcable {
    override fun calc(x: Int, y: Int): Int {
        return x * y
    }
}
```

<br>

이를 고차 함수로 간결하고 재사용성 높은 코드로 만들 수 있다. 

```kt
fun main(args: Array<String>) {
    val sum: (Int, Int) -> Int = { x, y -> x + y }
    val minus: (Int, Int) -> Int = { x, y -> x - y }
    val product: (Int, Int) -> Int = { x, y -> x * y }
    
    println(higherOrder(sum, 1, 5))
    println(higherOrder(minus, 5, 2)) 
    println(higherOrder(product, 4, 2))
}

fun higherOrder(func: (Int, Int) -> Int, x: Int, y: Int): Int = func(x, y)
```

<br>
<hr>

# 부분 함수

함수형 언어에서는 **부분 함수**를 통해 어떤 함수의 입력이 특정한 값이나 범위 내에 있을때만 함수를 정상적으로 실행시킬 수 있다.

부분 함수란 모든 가능한 입력 중, 일부 입력에 대한 결과만 정의한 함수를 의미한다. <br>
*f: X -> Y*인 함수가 있을때 *f': X' -> Y* 함수에서 X'가 X의 부분 집합이면 f'는 f의 부분 함수이다. <br>
이때 함수의 입력 X'가 X의 부분 집합이면 부분 함수 관계가 성립한다.

## ex

```kt
fun twice(x: Int) = x * 2

fun partialTwice(x: Int): Int = 
    if (x < 100) {
        x * 2 
    }
    else {
        throw IllegalArgumentException()
    }
```

twice 함수는 모든 입력을 두 배 하지만, partialTwice 함수는 입력값이 100보다 작은 경우에만 두 배 한다. <br>
여기서 partialTwice 함수의 x값은 twice 함수의 x값의 부분 집합이다.

<br>

```kt
fun sayNumber1(x: Int): String = when (x) {
    1 -> "One!"
    2 -> "Two!"
    3 -> "Three!"
    else -> "Not between 1 and 3"
}
```

sayNumber1 함수는 모든 입력값에 대해 결과를 정의했기 때문에 부분 함수가 아니다.

```kt
fun sayNumber2(x: Int): String = when (x) {
    1 -> "One!"
    2 -> "Two!"
    3 -> "Three!"
    else -> throw IllegalArgumentException()
}
```

sayNumber2 함수는 입력값 1, 2, 3 이외의 값은 예외가 발생하기 때문에 부분 함수이다.











