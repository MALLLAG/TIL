## HTTP 2
```
데이터 표현이 HTTP 1.1과 달라졌다

1. 스트림을 사용해 바이너리 데이터를 다중으로 송수신하는 구조로 변경했다.
2. 스트림 내 우선 순위 설정과 서버 사이드에서 데이터 통신을 하는 서버 사이드 푸시를 구현했다.
3. 헤더가 압축되게 되었다.

HTTP 2의 목적은 통신 고속화뿐이다.

TCP 소켓 수준에서 보면 다음과 같은 개선이 이루어졌다.
```

|기능|효과|
|---|---|
|캐시(max-age)|통신 자체를 취소|
|캐시(ETag, Date)|변경이 없으면 바디 전송을 취소|
|Keep-Alive|액세스마다 연결에 걸리는 시간 (1.5TTL)을 줄임|
|압축|응답 바디 크기 절감|
|청크|응답 전송 시작을 빠르게 함|
|파이프라이닝|통신 다중화|


### 스트림을 사용한 통신 고속화
```
HTTP 2에서의 가장 큰 변화는 텍스트 기반 프로토콜에서 바이너리 기반 프로토콜로 변화했다는 점이다.

HTTP 1.1까지는 하나의 요청이 TCP 소켓을 독점했기 때문에, 하나의 오리지널 서버에 대해 2~6개의 TCP 접속을 해서 병렬화 했다.
HTTP 2에서는 하나의 TCP 접속 안에 스트림이라는 가상의 TCP 소켓을 만들어 통신한다.
스트림은 프레임에 따른 플래그로 간단히 만들고 닫을 수 있는 규칙으로 되어 있고, 일반 TCP 소켓과 같은 핸드셰이크는 필요 없다.
그래서 ID 값과 TCP 통신 용량이 허용하는 한, 몇 만번의 접속이라도 병렬화 할 수 있다.
```

### HTTP 2의 애플리케이션 계층
```
HTTP 1.0은 단순히 데이터를 운반하는 상자였다.
그 뒤로 Keep-Alive, 파이프라이닝 등 하위 계층의 통신 처리에 영향을 주는 기능도 포함하기 시작했지만
메서드와 경로, 헤더, 바디, 스테이터스 코드라는 네가지 기본 요소가 존재한다는 것은 변함이 없다.

HTTP 1.1은 텍스트 프로토콜이였다.
헤더의 종단을 찾으려면 빈 줄을 찾을 때까지 1바이트씩 미리 읽어 발견할 필요가 있다.
오류 처리도 있고 서버로서는 해석까지 포함해 순차적으로 처리할 수 밖에 없으므로 고급 병렬 처리는 어렵다.

HTTP 2는 바이너리화 되어, 처음에 프레임 크기가 들어간다.
TCP 소켓 레이어에서는 데이터를 프레임 단위로 쉽게 분리할 수 있으므로, 수신측 TCP 소켓의 버퍼를 빠르게 비울 수 있고
통신 다음 상대에게 다음 데이터를 고속으로 요청할 수 있다.
```

### 플로 컨트롤
```
HTTP 2는 인터넷 4계층 모델 중 애플리케이션 층에 해당하지만, 트랜스포트 층에 가까운 것을 내부에 가지고 있다.

플로 컨트롤은 스트림을 효율적으로 흐르게 하려고 이용되는 통신량 제어 처리이다.
통신 속도가 지나치게 차이 나는 기기의 조합으로 통신할 때 빠른 쪽이 느린 쪽에 대량으로 패킷을 보내버려
처리할 수 없게 되는 사태를 방지하는 게 목적이다.

송신하는 쪽은 상대방의 최대 버퍼 크기만큼 데이터를 보낸다.
수신하는 쪽은 전송된 패킷을 처리하고 버퍼에 여유가 생기면, WINDOW_UPDATE 프레임을 이용해 새로 생긴 여유 버퍼 크기를 송신하는 쪽에 반환한다.
송신하는 쪽에서 이 통지를 받으면, 새로 생신 여유 버퍼를 채울 만큼 이어지는 데이터를 보낸다.
```

### 서버 푸시
```
서버 푸시를 이용해 우선순위가 높은 콘텐츠를 클라이언트가 요구하기 전에 전송할 수 있게 되었다.
단 웹소켓처럼 양방향 통신을 실현하는 기술과 달리, CSS와 자바스크립트, 이미지 등 웹 페이지를 구성하는 파일을 다운로드하는 용도로 이용된다.
푸시된 컨텐츠는 사전에 캐시에 들어가고, 클라이언트가 그 파일을 요청하면 곧바로 다운로드할 수 있는 것 처럼 보인다.
```

### HPACK을 이용한 헤더 압축
```
헤더는 HPACK이라는 방식으로 압축된다.

HTTP 헤더에서는 정해진 이름이나 결과가 자주 출현하므로, 이를 외부 사전에 넣어두면 압축 후 크기가 작아진다.
HTTP 2에서는 정적 테이블이라는 이름으로 사전에 빈번하게 출현하는 헤더 이름과 헤더 값을 테이블로 가지고 있다.

추가로 같은 커넥션에서 등장한 HTTP 헤더는 인덱스화되어 동적 테이블에 저장된다.
다시 등장할때는 인덱스 값만으로 표현할 수 있으므로 작은 크기로 송신이 가능하다.
```

### SPDY와 QUIC
```

```



























