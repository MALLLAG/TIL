# HTTP/1.1 의 변경사항
```
- 통신 고속화
  Keep-Alive가 기본적으로 유효
  파이프라이닝
- TLS에 의한 암호화 통신을 지원
- 새 메서드 추가
  PUT과 DELETE가 필수 메서드가 됐다
  OPTION, TRACE, CONNECT 메서드가 추가됐다
- 프로토콜 업그레이드
- 이름을 이용한 가상 호스트를 지원
- 크기를 사전에 알 수 없는 컨텐츠의 청크 전송 인코딩 지원
```

<br>
<hr>

## 통신 고속화
```
- Keep-Alive
  HTTP의 아래층인 TCP/IP 통신을 효율화하는 구조
  Keep-Alive를 사용하지 않으면 하나의 요청마다 통신을 닫아야 하지만, Keep-Alive를 사용하면 연속된 요청에는 접속을 다시 이용
  이로써 TCP/IP는 접속까지의 대기시간이 줄었고, 통신 처리량이 많아지므로 속도가 올라간 것 처럼 느껴진다.
  
  Keep-Alive 지속 시간은 클라이언트와 서버 모두가 가지고 있다.
  한쪽이 TCP/IP 연결을 끊는 순간 통신은 완료되므로, 어느 쪽이든 짧은 쪽이 사용된다.
  
  
- 파이프 라이닝
  최초의 요청이 완료되기 전 다음 요청을 보내는 기술
  다음 요청까지의 대기 시간을 없앰으로써, 네트워크 가동률을 높이고 성능을 향상.
  Keep-Alive 이용을 전제로 하며 서버는 요청이 들어온 순서대로 응답을 반환.
```

<br>
<hr>

## 전송 계층 보안 (TLS)
```
전송 계층 보안 (Transport Layer Security)

TLS 암호화는 HTTP뿐만 아니라 다양한 형식의 데이터를 양방향으로 흘려보낼 수 있다.
HTTP 통신을 중계하는 게이트웨이 입장에서 보면 '암호화되어 통신 내용을 엿보거나 변경할 수 없는 양방향 통신'이다.
```

### TLS 통신 절차
```
TLS 통신은 크게 셋으로 나눌 수 있다.
처음이 핸드셰이크 프로토콜로 통신을 확립하는 단계
다음이 레코드 프로토콜로 불리는 통신 단계
마지막이 SessionTicket 구조를 이용한 재접속 시의 고속 핸드셰이크

- 서버의 신뢰성 확인
  서버의 신뢰성을 보증하는 구조는 공개 키를 보증하는 구조이기도 해서, 공개 키 기반구조라고 불린다.
  
  브라우저는 서버에서 그 서버의 SSL 인증서를 가져오는 것부터 시작한다.
  인증서는 발행자의 디지털 서명이 있다. 그 발행자의 인증서를 취득함으로써 서명을 검증할 수 있다.
  그리고 다시 상위 발행자의 인증서도 차례로 검증해, 최종적으로는 발행자와 주체자가 동일한 인증서가 나온다. (루트 인증기관)
  
  다만 루트 인증기관 자신의 신뢰성은 이 구조만으로는 보증할 수 없다.
  따라서 브라우저와 OS에는 미리 신뢰할 수 있는 인증기관의 인증서가 설치되어 있다.
  이 인증서와 대조함으로써 최종적으로 서버가 승인된 것임을 확인할 수 있다.
  

- 키 교환과 통신 시작
  공개 키를 사용하는 방법과 키 교환 전용 알고리즘을 사용하는 방법이 있다.
  
  클라이언트는 먼저 난수를 사용해 통신용 공통 키를 만든다.
  
  서버 인증서에 첨부된 공개 키로 통신용 공통 키를 암호화해 그 키를 서버에 보낸다.
  서버는 인증서의 공개 키에 대응하는 비밀 키를 가지고 있으므로 건네받은 데이터를 복호화해 공통 키를 꺼낼 수 있다.
  
  키 교환 전용 알고리즘을 사용할 때는, 어느 한 쪽이 완전한 키를 만들어 상대에 넘기는 것이 아니라
  키를 생성할 시드를 클라이언트와 서버 양쪽에서 하나씩 만든다.
  만들어진 시드를 서로 교환해서 계산한 결과가 공통 키가 된다.
  시드를 교환할 때 공개 키 암호가 함께 사용된다.
  
  순방향 비밀성이 우수하므로, 앞으로 키 교환에서 주류가 되는것은 키 교환 전용 알고리즘 방식이다
```

### 통신의 고속화
```
TLS 1.2에서는 세션 재개 기능이 있어 최초의 핸드셰이크에서 전에 사용하던 세션 ID를 보내면 이후의 키 교환이 생략되므로
1RTT로 세션이 재개된다.

1.3에서는 사전에 키를 공유해 둠으로써 0RTT로 최초 요청부터 정보를 전송할 수 있게 된다.

TLS 1.3에서는 키 교환과 비밀 키 암호가 분리되어 암호화 스위트로 비밀 키 암호를 니고시에이션한 결과를 기다리지 않고
최초의 Client Hello로 클라이언트쪽에서 키를 교환할 수 있게 된다. 통신이 1 왕복 줄어 1RTT로 인증이 완료된다.
```

<br>
<hr>

## PUT 메서드와 DELETE 메서드의 표준화
```
HTTP/1.0에서는 옵션이였던 PUT과 DELETE 메서드가 필수 메서드로 추가되었다.
이로써 데이터베이스에서 데이터를 다룰 때 사용하는 기본적인 네 개의 메서드 (CRUD)가 갖추어져
HTTP는 데이터를 취급하는 프로토콜로도 이용할 수 있게 되었다.

데이터베이스의 경우 트랜잭션이라는 큰 테두리 안에서 데이터의 불일치가 일어나지 않도록 CRUD를 사용한
1회 액션으로 데이터를 갱신한다.
HTTP 에서는 트랜잭션이 없고, 1회 액션에 해당하는 조작이 HTTP의 1 요청이다.

새로 늘어난 PUT과 DELETE는 HTML의 폼으로 보낼 수 없고, XMLHttp Request를 사용해야 한다.
```





























