# OSI 7계층
- 복잡한 데이터 전송 과정을 OSI 7계층으로 나누어 보면 이해하기 쉽다

<br>

### OSI 7계층을 다시 두 가지 계층으로 나눌 수 있다
- 1~4 계층 (데이터 플로 계층) / 하위 계층
- 5~7 계층 (애플리케이션 계층) / 상위 계층
- 애플리케이션 개발자는 애플리케이션 계층 프로토콜을 개발할때 하위 데이터 플로 계층을 고려하지 않고 개발한다 (하향식)
- 반대로 네트워크 엔지니어는 애플리케이션 계층을 심각하게 고려하지 않는다 (상향식)

<img width="600" src="image/OSI 7-1.png" />

<br>

### TCP/IP 계층은 4계층으로 구분한다
- [4 계층] : 응용 계층 - OSI 7 계층에서 세션 계층, 프레젠테이션 계층, 애플리케이션 계층에 해당한다.(5, 6, 7계층)
- [3 계층] : 전송 계층 - OSI 7 계층에서 전송 계층에 해당한다. 네트워크 양단의 송수신 호스트 사이에서 신뢰성 있는 전송기능을 제공하고, 시스템의 논리주소와 포트를 가지고 있어서 각 상위 계층의 프로세스를 연결해서 통신
- [2 계층] : 인터넷 계층 - OSI 7 계층의 네트워크 계층에 해당한다. 인터넷 계층의 주요 기능은 상위 트랜스포트 계층으로부터 받은 데이터에 IP패킷 헤더를 붙여 IP패킷을 만들고 이를 전송
- [1 계층] : 네트워크 접근 계층(network access layer) : OSI 7 계층에서 물리계층과 데이터링크 계층에 해당한다. OS의 네트워크 카드와 디바이스 드라이버 등과 같이 하드웨어적인 요소와 관련되는 모든 것을 지원하는 계층

<br>

### OSI 1 계층 (피지컬 계층)
- 물리 계층으로 물리적 연결과 관련된 정보를 정의 (주로 전기 신호를 전달)
- 1 계층 주요 장비로는 허브, 리피터, 케이블, 커넥터, 트랜시버, 탭이 있다
- [허브, 리피터] : 네트워크 통신을 중재하는 장비
- [케이블, 커넥터] : 케이블 본체를 구성하는 요소
- [트랜시버] : 컴퓨터의 랜카드와 케이블을 연결하는 장비
- [탭] : 네트워크 모니터링과 패킷 분석을 위해 전기 신호를 다른 장비로 복제해준다
- 1 계층 장비는 주소의 개념이 없어서 전기 신호가 들어오는 포트를 제외하고 모든 포트에 같은 전기 신호를 전송

<br>

### OSI 2 계층 (데이터 링크 계층)
- 데이터 링크 계층으로 전기 신호를 모아 우리가 알아볼 수 있는 데이터 형태로 처리
- 1 계층과는 다르게 전기 신호를 정확히 전달하기 보다는 주소 정보를 정의하고 정확한 주소로 통신이 되도록 도와줌
- 1 계층에서는 출발지와 목적지를 구분할 수 없지만 2 계층에서는 출발지와 목적지 주소를 확인하고, 내게 보낸것이 맞는지, 또는 내가 처리해야하는지 검사한 후 데이터 처리
- 2 계층에서는 주소 체계가 생기므로 여러 통신이 한꺼번에 이루어지는 것을 구분하기 위한 기능이 정의
- 전기 신호를 모아 데이터 형태로 처리하므로 데이터에 대한 에러 처리 가능
- 무작정 데이터를 던지는것이 아니라 받는 사람이 데이터를 받을 수 있는지 확인 (Flow Control)
- 2 계층에서 동작하는 네트워크 구성 요소는 네트워크 인터페이스 카드와 스위치
- 2 계층의 가장 큰 특징은 MAC 주소라는 주소 체계가 있다는 것
- [네트워크 인터페이스 카드]와 [스위치] 모두 MAC 주소를 이해 가능
- 스위치는 MAC 주소를 보고 통신해야 할 포트를 지정해 내보낸다
- [네트워크 인터페이스 카드] : 고유 MAC 주소가 있다. 입력되는 전기 신호를 데이터 형태로 만들고 데이터에서 도착지 MAC 주소를 확인한 후 자신에게 들어오는 전기 신호가 맞는지 확인한다. 자신에게 들어오는 전기 신호가 맞으면 이 데이터를 상위 계층에서 처리할 수 있도록 메모리에 올린다
- [스위치] : 단말이 어떤 MAC 주소인지, 연결된 포트는 어느 것인지 주소 습득 과정에서 알 수 있다. 단말들이 통신할 때 정확한 포트에 포워딩해준다

<br>

### OSI 3 계층 (네트워크 계층)
- 3 계층에서는 IP 주소와 같은 논리적인 주소가 정의
- MAC 주소와 달리 IP 주소는 환경에 맞게 변경해 사용이 가능하고, 네트워크 주소 부분과 호스트 주소 부분으로 나뉜다
- [라우터] : 3 계층에서 정의한 IP 주소를 이해할 수 있다. IP 주소를 이용해 최적의 경로를 찾아주고 패킷을 전송하는 역할을 한다

<br>

### OSI 4 계층 (트랜스포트 계층)
- 4 계층에서는 데이터들이 정상적으로 잘 보내지는지 확인하는 역할을 한다
- 패킷 네트워크는 데이터를 분할해 패킷에 실어다 보내다 보니, 패킷이 유실되거나 순서가 바뀌는 경우가 있다. 이 문제를 해결해주는 역할을 하는게 4 계층
- 4 계층에서는 패킷을 분할할 때 패킷 헤더에 보내는 순서와 받는 순서를 적어 통신하므로 유실되거나 순서가 바뀌는 문제를 해결 가능
- [시퀀스 번호] : 패킷에 보내는 순서를 명시
- [ACK 번호] : 받는 순서를 명시
- [포트 번호] : 상위 애플리케이션을 구분하기 위해 사용
- 4 계층에서 사용하는 장비로는 로드 밸런서와 방화벽이 있다

<br>

### OSI 5 계층 (세션 계층)
- 양 끝단의 프로세스가 연결을 성립하도록 도와주고, 연결이 안정적으로 유지되도록 관리해주고, 이 연결을 끊는 역할을 한다
- 흔히 우리가 부르는 '세션'을 관리하는 것이 주요 역할 (TCP/IP 세션을 만들고 없애는 책임을 진다)
- 에러로 중단된 통신에 대한 복구와 재전송도 수행

<br>

### OSI 6 계층 (프레젠테이션 계층)
- 통신을 돕기 위해 하나의 통일된 구문 형식으로 변환시키는 기능을 수행
- MIME 인코딩이나 암호화, 압축, 코드 변환 등이 이루어진다

<br>

### OSI 7 계층 (애플리케이션 계층)
- UI 부분이나 사용자 입,출력 부분을 정의
- FTP, SMTP, HTTP, TELNET 이 있다

<br>

### 인캡슐레이션과 디캡슐레이션
- 상위 계층에서 하위 계층으로 데이터를 보내면 받는 쪽에서 다시 하위 계층에서 상위 계층으로 데이터를 보낸다
- 이 과정을 인캡슐레이션, 디캡슐레이션이라고 한다
- 현대 네트워크는 대부분 패킷 기반 (데이터를 패킷 단위로 쪼개어 보냄)
- 데이터를 인캡슐레이션 하는 과정에서 헤더에 넣는 정보들이 많지만, (현재 계층에서 정의하는 정보, 상위 프로토콜 지시자)는 반드시 포함되어야 한다
<img width="600" src="image/OSI 7-2.png" />






















